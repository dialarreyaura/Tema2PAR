<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>6.3.1.1. Formato de cabecera | Tema 2 PAR </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Diana de Lara del Rey" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.8.1 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-34"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">Tema 2 PAR</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Tema 2. Teoría de las comunicaciones. El modelo OSI. TCP/IP</a></li>
   <li><a href="1_introduccin.html" class="no-ch">1. Introducción</a></li>
   <li><a href="2_protocolos_de_comunicacin.html" class="daddy">2. Protocolos de Comunicación</a>
   <ul class="other-section">
      <li><a href="21_por_qu_importan_los_protocolos.html" class="no-ch">2.1. ¿Por Qué Importan los Protocolos?</a></li>
      <li><a href="22_protocolos_de_red.html" class="no-ch">2.2. Protocolos de Red</a></li>
   </ul>
   </li>
   <li><a href="3_funciones_de_la_comunicacin.html" class="no-ch">3. Funciones de la Comunicación</a></li>
   <li><a href="4_arquitectura_de_comunicaciones.html" class="daddy">4. Arquitectura de Comunicaciones</a>
   <ul class="other-section">
      <li><a href="41_diseo_de_arquitectura_de_red.html" class="no-ch">4.1. Diseño de Arquitectura de Red</a></li>
      <li><a href="42_caractersticas_de_las_arquitecturas_por_niveles.html" class="no-ch">4.2. Características de las Arquitecturas por Niveles</a></li>
   </ul>
   </li>
   <li><a href="5_el_modelo_de_referencia_osi.html" class="daddy">5. El modelo de referencia OSI</a>
   <ul class="other-section">
      <li><a href="51_la_capa_fsica.html" class="no-ch">5.1. La capa física</a></li>
      <li><a href="52_la_capa_de_enlace_de_datos.html" class="no-ch">5.2. La capa de enlace de Datos</a></li>
      <li><a href="53_la_capa_de_red.html" class="no-ch">5.3. La capa de red</a></li>
      <li><a href="54_la_capa_de_transporte.html" class="no-ch">5.4. La capa de transporte</a></li>
      <li><a href="55_la_capa_de_sesin.html" class="no-ch">5.5. La capa de sesión</a></li>
      <li><a href="56_la_capa_de_presentacin.html" class="no-ch">5.6. La capa de presentación</a></li>
      <li><a href="57_la_capa_de_aplicacin.html" class="no-ch">5.7. La capa de aplicación</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="6_el_modelo_tcpip.html" class="current-page-parent daddy">6. El Modelo TCP/IP</a>
   <ul>
      <li><a href="61_la_capa_de_acceso_a_red.html" class="daddy">6.1. La capa de acceso a red</a>
      <ul class="other-section">
         <li><a href="611_formato_de_tramas.html" class="no-ch">6.1.1. Formato de tramas</a></li>
         <li><a href="612_direccin_mac.html" class="no-ch">6.1.2. Dirección MAC</a></li>
      </ul>
      </li>
      <li><a href="62_la_capa_de_red_o_internet.html" class="daddy">6.2. La capa de red o Internet</a>
      <ul class="other-section">
         <li><a href="621_protocolo_ip.html" class="daddy">6.2.1. Protocolo IP</a>
         <ul class="other-section">
            <li><a href="6211_subredes.html" class="no-ch">6.2.1.1. Subredes</a></li>
            <li><a href="6212_tabla_de_encaminamiento.html" class="no-ch">6.2.1.2. Tabla de encaminamiento</a></li>
         </ul>
         </li>
         <li><a href="622_protocolo_arp.html" class="no-ch">6.2.2. Protocolo ARP</a></li>
         <li><a href="623_protocolo_icmp.html" class="no-ch">6.2.3. Protocolo ICMP</a></li>
      </ul>
      </li>
      <li class="current-page-parent"><a href="63_la_capa_de_transporte.html" class="current-page-parent daddy">6.3. La capa de transporte</a>
      <ul>
         <li class="current-page-parent"><a href="631_protocolo_tcp.html" class="current-page-parent daddy">6.3.1. Protocolo TCP</a>
         <ul>
            <li id="active"><a href="6311_formato_de_cabecera.html" class="active no-ch">6.3.1.1. Formato de cabecera</a></li>
            <li><a href="6312_puerto_lgico.html" class="no-ch">6.3.1.2. Puerto lógico</a></li>
         </ul>
         </li>
         <li><a href="632_protocolo_udp.html" class="daddy">6.3.2. Protocolo UDP</a>
         <ul class="other-section">
            <li><a href="6321_formato_de_cabecera.html" class="no-ch">6.3.2.1. Formato de cabecera</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li><a href="64_la_capa_de_aplicacin.html" class="no-ch">6.4. La capa de aplicación</a></li>
   </ul>
   </li>
   <li><a href="7_comparacin_entre_el_modelo_osi_y_el_modelo_tcpip.html" class="no-ch">7. Comparación entre el Modelo OSI y el Modelo TCP/IP</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="631_protocolo_tcp.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="6312_puerto_lgico.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">6.3.1.1. Formato de cabecera</h1></header>
<article class="iDevice_wrapper textIdevice" id="id119">
<div class="iDevice emphasis0" >
<div id="ta119_137_2" class="block iDevice_content">
<div class="exe-text"><p>La unidad de información del protocolo TCP se llama segmento TCP. El segmento TCP está compuesto por los datos enviados desde la capa de aplicación y la cabecera añadida por el protocolo de transporte. El segmento TCP es luego encapsulado en un datagrama IP para ser enviado por la capa de red. El formato del segmento TCP es el siguiente:</p>
<p><img src="imagen.21.png" width="428" height="420" alt="segmento" style="display: block; margin-left: auto; margin-right: auto;" /></p>
<p>El segmento TCP consta de una cabecera y un cuerpo para encapsular datos. La cabecera consta de los siguientes campos:</p>
<ul>
<li>Los campos <strong>puerto de origen y puerto de destino</strong> (16 bits cada dirección), que identifican las aplicaciones en los terminales de origen y de destino. </li>
<li>El <strong>campo número de secuencia</strong> (32 bits), que identifica el primer byte del campo de datos. En el TCP no se numeran segmentos, sino bytes. Por lo tanto, el número de secuencia identifica el primer byte de los datos que envía el segmento. Al principio de la conexión se asigna un número de secuencia inicial (ISN, del inglés Initial Sequence Number). A partir de este momento, el TCP numera los bytes consecutivamente a partir del ISN.</li>
<li>El <strong>campo número ACK</strong> (32 bits). El TCP reconoce datos mediante la técnica de piggybacking. Al activar un bit de la cabecera (el bit ACK), el TCP tiene en cuenta el número de secuencia ACK que indica al otro extremo TCP el próximo byte que está dispuesto a recibir. Dicho de otro modo, el número ACK menos uno indica el último byte reconocido.</li>
<li>El campo <strong>longitud de la cabecera</strong> (header length) (4 bits), que indica la longitud de la cabecera, que puede ser variable. La longitud típica es de 20 bytes, pero si el TCP utiliza el campo de opciones puede llegar a una longitud máxima de 60 bytes. De esta manera, el TCP sabe dónde empiezan los datos.</li>
<li>El campo <strong>reservado</strong> (reserved) (6 bits). Tal como indica su nombre, está reservado y se inicializa con ceros.</li>
<li>El campo <strong>control</strong> (6 bits). Cada bit, denominado indicador, señala una función específica del protocolo cuando está activo (en 1), como las siguientes:
<ul>
<li><strong>URG</strong>: hay datos urgentes y el campo urgent pointer indica la cantidad de datos urgentes que se encuentran en el segmento.</li>
<li><strong>ACK</strong>: el campo número ACK indica el siguiente byte que espera recibir la conexión TCP. Si este campo no está activo, el campo número ACK no tiene ningún significado para el TCP.</li>
<li><strong>PSH</strong>: invoca la función push en el protocolo. Esta función dice al receptor que entregue en la aplicación todos los datos que tenga disponibles en la memoria intermedia de recepción sin esperar a completarlos con datos adicionales. De esta manera, los datos no esperan en la memoria intermedia receptora hasta completar un segmento de dimensión máxima. No se debe confundir con el indicador URG, que indica que la aplicación ha señalado una porción del segmento como urgente.</li>
<li><strong>RST</strong>: hace un reset de la conexión.</li>
<li><strong>SYN</strong>: resincroniza los números de secuencia.</li>
<li><strong>FIN</strong>: el transmisor ha acabado la conexión.</li>
</ul>
</li>
<li> El campo <strong>ventana</strong> (16 bits) indica cuántos bits componen la ventana de transmisión del protocolo de control de flujo por ventana deslizante. A diferencia de los protocolos del nivel de enlace, en los cuales la ventana era constante y contaba tramas, en el TCP la ventana es variable y cuenta bytes. Con cada segmento transmitido, un extremo TCP advierte el otro extremo de la cantidad de datos que está dispuesto a recibir en cada momento. De este modo, el extremo que recibe un segmento actualiza el tamaño de su ventana de transmisión.</li>
<li>El campo <strong>checksum</strong> (16 bits) se utiliza para detectar errores.</li>
<li>El campo <strong>urgent pointer</strong> (16 bits) tiene sentido cuando el bit de control URG está activo e indica que los datos que envía el origen son urgentes. También identifica el último byte del campo de datos que es urgente. El receptor procesa estos datos tan rápidamente como puede. La aplicación es la que indica que estos datos son urgentes; en la recepción, el TCP indica a la aplicación que los datos son urgentes. Algunas aplicaciones que utilizan el urgent pointer son, por ejemplo, telnet, rlogin o ftp. En la librería de sockets, el tráfico urgente se llama tráfico fuera de banda (out of band).</li>
<li>El campo <strong>opciones</strong> <strong>TCP</strong> permite añadir campos a la cabecera para realizar las siguientes operaciones:
<ul>
<li>Un <strong>timestamp</strong> para marcar el tiempo en que se transmitió el segmento y monitorar así los retrasos que experimentan los segmentos desde el origen hasta el destino.</li>
<li>Aumentar el tamaño de la ventana.</li>
<li>Indicar el tamaño máximo del segmento (MSS) que el origen está preparado para recibir. Por lo tanto, el receptor no puede transmitirle segmentos por encima de este valor.</li>
</ul>
</li>
</ul>
<p style="text-align: justify;">El tamaño máximo del segmento TCP transmitido, MSS, se especifica durante el establecimiento de la conexión y define la máxima longitud de datos que enviará el TCP.<br /><br />El hecho de elegir el MSS no es trivial. En general, cuanto mayor sea el MSS (Maximum Segment Size), mejor, ya que las cabeceras IP y TCP se amortizan más. No obstante, si la MTU es pequeña, será necesario fragmentar el datagrama IP (es decir, el segmento TCP); por lo tanto, normalmente no interesa elegir MSS mayores que la MTU. En este caso, existen varias posibilidades:</p>
<ol>
<li style="text-align: justify;">Una de estas posibilidades es buscar el MTU local de la red a que está conectada la estación y, si hay MTU más pequeñas hasta el destino, habrá fragmentación.</li>
<li style="text-align: justify;">Otra posibilidad es utilizar un mecanismo de investigación (en inglés, llamado MTU discovery path) para averiguar cuál es la MTU más pequeña desde el origen hasta el destino (y utilizar como MSS la MTU más pequeña menos los 40 bytes de cabeceras IP y TCP).</li>
</ol>
<p></p>
<p></p></div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="631_protocolo_tcp.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="6312_puerto_lgico.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_adultos_js.js"></script></body></html>